name       : libsolv
version    : 0.6.29
release    : 1
source     :
    - https://github.com/openSUSE/libsolv/archive/0.6.29/libsolv-0.6.29.tar.gz : d46b3de18b677add61074e2522c4d5bfda886d705910aafbec4afd8119d94781
license    : BSD-3-Clause
component  : programming.library
summary    : Package dependency solver
description: |
    A free package dependency solver using satisfiability algorithm. The
    library is based on two major, but independent, blocks.

    * Using a dictionary approach to store and retrieve package and
      dependency information.
    
    * Using satisfiability, a well known and researched topic, for
      resolving package dependencies.

builddeps  : 
    - pkgconfig(rpm)
    - bzip2-devel
setup      : |
    mkdir libsolv-build
    pushd libsolv-build
    # Using the FEDORA definition so that libdnf will have the correct basic setup
    %cmake -DFEDORA=1 \
        -DENABLE_APPDATA=ON \
        -DENABLE_COMPS=ON \
        -DENABLE_BZIP2_COMPRESSION=ON \
        -DENABLE_RPMDB=ON \
        -DENABLE_RPMDB_BYRPMHEADER=ON \
        -DENABLE_RPMMD=ON \
        -DWITH_LIBXML2=ON \
        -DENABLE_LZMA_COMPRESSION=ON ..
build      : |
    %make -C libsolv-build
install    : |
    %make_install -C libsolv-build

check      : |
    pushd libsolv-build
    ctest ..
    popd
